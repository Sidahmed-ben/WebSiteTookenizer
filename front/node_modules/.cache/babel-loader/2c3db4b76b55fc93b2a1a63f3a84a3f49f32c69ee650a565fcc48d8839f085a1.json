{"ast":null,"code":"/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst {\n  Clonable\n} = require('@nlpjs/core');\nclass SentimentAnalyzer extends Clonable {\n  constructor() {\n    let settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let container = arguments.length > 1 ? arguments[1] : undefined;\n    super({\n      settings: {},\n      container: settings.container || container\n    }, container);\n    this.applySettings(this.settings, settings);\n    if (!this.settings.tag) {\n      this.settings.tag = 'sentiment-analyzer';\n    }\n    this.registerDefault();\n    this.applySettings(this.settings, this.container.getConfiguration(this.settings.tag));\n    this.applySettings(this, {\n      pipelinePrepare: this.getPipeline(`${this.settings.tag}-prepare`),\n      pipelineProcess: this.getPipeline(`${this.settings.tag}-process`)\n    });\n  }\n  registerDefault() {\n    this.container.registerConfiguration('sentiment-analyzer', {}, false);\n  }\n  prepare(locale, text, settings, stemmed) {\n    const pipeline = this.getPipeline(`${this.settings.tag}-prepare`);\n    if (pipeline) {\n      const input = {\n        text,\n        locale,\n        settings: settings || this.settings\n      };\n      return this.runPipeline(input, pipeline);\n    }\n    if (stemmed) {\n      const stemmer = this.container.get(`stemmer-${locale}`) || this.container.get(`stemmer-en`);\n      if (stemmer) {\n        return stemmer.tokenizeAndStem(text);\n      }\n    }\n    const tokenizer = this.container.get(`tokenizer-${locale}`) || this.container.get(`tokenizer-en`);\n    if (tokenizer) {\n      return tokenizer.tokenize(text, true);\n    }\n    const normalized = text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase();\n    return normalized.split(/[\\s,.!?;:([\\]'\"¡¿)/]+/).filter(x => x);\n  }\n  async getDictionary(srcInput) {\n    const input = srcInput;\n    const dictionaries = this.container.get(`sentiment-${input.locale}`);\n    let type;\n    if (dictionaries) {\n      if (dictionaries.senticon) {\n        type = 'senticon';\n      } else if (dictionaries.pattern) {\n        type = 'pattern';\n      } else if (dictionaries.afinn) {\n        type = 'afinn';\n      }\n    }\n    if (!type) {\n      input.sentimentDictionary = {\n        type,\n        dictionary: undefined,\n        negations: [],\n        stemmed: false\n      };\n      return input;\n    }\n    input.sentimentDictionary = {\n      type,\n      dictionary: dictionaries[type],\n      negations: dictionaries.negations.words,\n      stemmed: dictionaries.stemmed === undefined ? false : dictionaries.stemmed\n    };\n    return input;\n  }\n  async getTokens(srcInput) {\n    const input = srcInput;\n    if (!input.tokens && input.sentimentDictionary.type) {\n      input.tokens = await this.prepare(input.locale, input.utterance || input.text, input.settings, input.sentimentDictionary.stemmed);\n    }\n    return input;\n  }\n  calculate(srcInput) {\n    const input = srcInput;\n    if (input.sentimentDictionary.type) {\n      const tokens = Array.isArray(input.tokens) ? input.tokens : Object.keys(input.tokens);\n      if (!input.sentimentDictionary.dictionary) {\n        input.sentiment = {\n          score: 0,\n          numWords: tokens.length,\n          numHits: 0,\n          average: 0,\n          type: input.sentimentDictionary.type,\n          locale: input.locale\n        };\n      } else {\n        const {\n          dictionary\n        } = input.sentimentDictionary;\n        const {\n          negations\n        } = input.sentimentDictionary;\n        let score = 0;\n        let negator = 1;\n        let numHits = 0;\n        for (let i = 0; i < tokens.length; i += 1) {\n          const token = tokens[i].toLowerCase();\n          if (negations.indexOf(token) !== -1) {\n            negator = -1;\n            numHits += 1;\n          } else if (dictionary[token] !== undefined) {\n            score += negator * dictionary[token];\n            numHits += 1;\n          }\n        }\n        input.sentiment = {\n          score,\n          numWords: tokens.length,\n          numHits,\n          average: score / tokens.length,\n          type: input.sentimentDictionary.type,\n          locale: input.locale\n        };\n      }\n    } else {\n      input.sentiment = {\n        score: 0,\n        numWords: 0,\n        numHits: 0,\n        average: 0,\n        type: input.sentimentDictionary.type,\n        locale: input.locale\n      };\n    }\n    if (input.sentiment.score > 0) {\n      input.sentiment.vote = 'positive';\n    } else if (input.sentiment.score < 0) {\n      input.sentiment.vote = 'negative';\n    } else {\n      input.sentiment.vote = 'neutral';\n    }\n    return input;\n  }\n  async defaultPipelineProcess(input) {\n    let output = await this.getDictionary(input);\n    output = await this.getTokens(output);\n    output = await this.calculate(output);\n    delete output.sentimentDictionary;\n    return output;\n  }\n  process(srcInput, settings) {\n    const input = srcInput;\n    input.settings = input.settings || settings || this.settings;\n    if (this.pipelineProcess) {\n      return this.runPipeline(input, this.pipelineProcess);\n    }\n    return this.defaultPipelineProcess(input);\n  }\n}\nmodule.exports = SentimentAnalyzer;","map":{"version":3,"names":["Clonable","require","SentimentAnalyzer","constructor","settings","arguments","length","undefined","container","applySettings","tag","registerDefault","getConfiguration","pipelinePrepare","getPipeline","pipelineProcess","registerConfiguration","prepare","locale","text","stemmed","pipeline","input","runPipeline","stemmer","get","tokenizeAndStem","tokenizer","tokenize","normalized","normalize","replace","toLowerCase","split","filter","x","getDictionary","srcInput","dictionaries","type","senticon","pattern","afinn","sentimentDictionary","dictionary","negations","words","getTokens","tokens","utterance","calculate","Array","isArray","Object","keys","sentiment","score","numWords","numHits","average","negator","i","token","indexOf","vote","defaultPipelineProcess","output","process","module","exports"],"sources":["/home/sidahmed/Bureau/Cours_Master_1/S2/Web/Partie2/MoteurRecherche/moteur-rech/node_modules/@nlpjs/sentiment/src/sentiment-analyzer.js"],"sourcesContent":["/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst { Clonable } = require('@nlpjs/core');\n\nclass SentimentAnalyzer extends Clonable {\n  constructor(settings = {}, container) {\n    super(\n      {\n        settings: {},\n        container: settings.container || container,\n      },\n      container\n    );\n    this.applySettings(this.settings, settings);\n    if (!this.settings.tag) {\n      this.settings.tag = 'sentiment-analyzer';\n    }\n    this.registerDefault();\n    this.applySettings(\n      this.settings,\n      this.container.getConfiguration(this.settings.tag)\n    );\n    this.applySettings(this, {\n      pipelinePrepare: this.getPipeline(`${this.settings.tag}-prepare`),\n      pipelineProcess: this.getPipeline(`${this.settings.tag}-process`),\n    });\n  }\n\n  registerDefault() {\n    this.container.registerConfiguration('sentiment-analyzer', {}, false);\n  }\n\n  prepare(locale, text, settings, stemmed) {\n    const pipeline = this.getPipeline(`${this.settings.tag}-prepare`);\n    if (pipeline) {\n      const input = {\n        text,\n        locale,\n        settings: settings || this.settings,\n      };\n      return this.runPipeline(input, pipeline);\n    }\n    if (stemmed) {\n      const stemmer =\n        this.container.get(`stemmer-${locale}`) ||\n        this.container.get(`stemmer-en`);\n      if (stemmer) {\n        return stemmer.tokenizeAndStem(text);\n      }\n    }\n    const tokenizer =\n      this.container.get(`tokenizer-${locale}`) ||\n      this.container.get(`tokenizer-en`);\n    if (tokenizer) {\n      return tokenizer.tokenize(text, true);\n    }\n    const normalized = text\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .toLowerCase();\n    return normalized.split(/[\\s,.!?;:([\\]'\"¡¿)/]+/).filter((x) => x);\n  }\n\n  async getDictionary(srcInput) {\n    const input = srcInput;\n    const dictionaries = this.container.get(`sentiment-${input.locale}`);\n    let type;\n    if (dictionaries) {\n      if (dictionaries.senticon) {\n        type = 'senticon';\n      } else if (dictionaries.pattern) {\n        type = 'pattern';\n      } else if (dictionaries.afinn) {\n        type = 'afinn';\n      }\n    }\n    if (!type) {\n      input.sentimentDictionary = {\n        type,\n        dictionary: undefined,\n        negations: [],\n        stemmed: false,\n      };\n      return input;\n    }\n    input.sentimentDictionary = {\n      type,\n      dictionary: dictionaries[type],\n      negations: dictionaries.negations.words,\n      stemmed:\n        dictionaries.stemmed === undefined ? false : dictionaries.stemmed,\n    };\n    return input;\n  }\n\n  async getTokens(srcInput) {\n    const input = srcInput;\n    if (!input.tokens && input.sentimentDictionary.type) {\n      input.tokens = await this.prepare(\n        input.locale,\n        input.utterance || input.text,\n        input.settings,\n        input.sentimentDictionary.stemmed\n      );\n    }\n    return input;\n  }\n\n  calculate(srcInput) {\n    const input = srcInput;\n    if (input.sentimentDictionary.type) {\n      const tokens = Array.isArray(input.tokens)\n        ? input.tokens\n        : Object.keys(input.tokens);\n      if (!input.sentimentDictionary.dictionary) {\n        input.sentiment = {\n          score: 0,\n          numWords: tokens.length,\n          numHits: 0,\n          average: 0,\n          type: input.sentimentDictionary.type,\n          locale: input.locale,\n        };\n      } else {\n        const { dictionary } = input.sentimentDictionary;\n        const { negations } = input.sentimentDictionary;\n        let score = 0;\n        let negator = 1;\n        let numHits = 0;\n        for (let i = 0; i < tokens.length; i += 1) {\n          const token = tokens[i].toLowerCase();\n          if (negations.indexOf(token) !== -1) {\n            negator = -1;\n            numHits += 1;\n          } else if (dictionary[token] !== undefined) {\n            score += negator * dictionary[token];\n            numHits += 1;\n          }\n        }\n        input.sentiment = {\n          score,\n          numWords: tokens.length,\n          numHits,\n          average: score / tokens.length,\n          type: input.sentimentDictionary.type,\n          locale: input.locale,\n        };\n      }\n    } else {\n      input.sentiment = {\n        score: 0,\n        numWords: 0,\n        numHits: 0,\n        average: 0,\n        type: input.sentimentDictionary.type,\n        locale: input.locale,\n      };\n    }\n    if (input.sentiment.score > 0) {\n      input.sentiment.vote = 'positive';\n    } else if (input.sentiment.score < 0) {\n      input.sentiment.vote = 'negative';\n    } else {\n      input.sentiment.vote = 'neutral';\n    }\n    return input;\n  }\n\n  async defaultPipelineProcess(input) {\n    let output = await this.getDictionary(input);\n    output = await this.getTokens(output);\n    output = await this.calculate(output);\n    delete output.sentimentDictionary;\n    return output;\n  }\n\n  process(srcInput, settings) {\n    const input = srcInput;\n    input.settings = input.settings || settings || this.settings;\n    if (this.pipelineProcess) {\n      return this.runPipeline(input, this.pipelineProcess);\n    }\n    return this.defaultPipelineProcess(input);\n  }\n}\n\nmodule.exports = SentimentAnalyzer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}